<?xml version="1.0"?>
<fest:template xmlns:fest="http://fest.mail.ru" context_name="json">
  <div data-id="todos">
    <h1>Todos</h1>

    <form action="/add" data-component-el="form" data-value="current is: {json.newTodo}">
      <div>
        <input type="text" value="{json.newTodo}" placeholder="Add new todo" />
        <button type="submit">+</button>
      </div>
    </form>

    <fest:if test="json.todos && json.todos.length > 0">
      <ul class="m-todo__list">
        <fest:for iterate="json.todos" index="i" value="todo">
          <li class="m-todo__item">
            <form action="/edit/{todo.id}">
              <label>
                <input type="checkbox" />
                <span><fest:value>todo.text</fest:value></span>
              </label>
            </form>
          </li>
        </fest:for>
      </ul>
      <p>
        Total todos: <fest:value output="html">json.todos.length</fest:value>
      </p>
    </fest:if>
  </div>
</fest:template>
